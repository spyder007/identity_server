@using Microsoft.AspNetCore.Hosting
@using Microsoft.Extensions.Hosting
@model ErrorViewModel
@inject IWebHostEnvironment host

@{
    var error = Model?.Error?.Error;
    var errorDescription = host.IsDevelopment() ? Model?.Error?.ErrorDescription : null;
    var request_id = Model?.Error?.RequestId;
    ViewData["Title"] = "Error";
}

<div class="min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center p-4">
    <div class="card bg-base-100 shadow-2xl max-w-2xl w-full">
        <div class="card-body text-center">
            <!-- Error Icon -->
            <div class="avatar mb-8">
                <div class="w-24 rounded-full bg-error/10">
                    <i class="fas fa-exclamation-triangle text-error text-4xl flex items-center justify-center h-full"></i>
                </div>
            </div>

            <!-- Error Title -->
            <h1 class="text-4xl font-bold text-error mb-4">Oops! Something went wrong</h1>
            <p class="text-lg text-base-content/70 mb-8">
                We encountered an unexpected error while processing your request.
            </p>

            <!-- Error Details -->
            @if (error != null || errorDescription != null)
            {
                <div class="alert alert-error mb-8">
                    <i class="fas fa-bug"></i>
                    <div class="text-left">
                        @if (error != null)
                        {
                            <h3 class="font-bold">Error Details</h3>
                            <div class="text-sm">@error</div>
                        }
                        
                        @if (errorDescription != null)
                        {
                            <div class="mt-2">
                                <h4 class="font-semibold">Description</h4>
                                <div class="text-sm">@errorDescription</div>
                            </div>
                        }
                    </div>
                </div>
            }

            <!-- Request ID -->
            @if (request_id != null)
            {
                <div class="bg-base-200 p-4 rounded-lg mb-8">
                    <div class="text-sm text-base-content/70">
                        <strong>Request ID:</strong> 
                        <code class="text-xs bg-base-300 px-2 py-1 rounded">@request_id</code>
                    </div>
                    <div class="text-xs text-base-content/50 mt-1">
                        Please include this ID when contacting support
                    </div>
                </div>
            }

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <button onclick="history.back()" class="btn btn-primary btn-lg">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Go Back
                </button>
                <a asp-controller="Home" asp-action="Index" class="btn btn-outline btn-lg">
                    <i class="fas fa-home mr-2"></i>
                    Return Home
                </a>
            </div>

            <!-- Additional Help -->
            <div class="mt-8 p-6 bg-info/10 rounded-lg">
                <h3 class="text-lg font-semibold mb-4">Need Help?</h3>
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm">
                    <div class="text-center">
                        <i class="fas fa-refresh text-info text-xl mb-2"></i>
                        <div class="font-medium">Try Again</div>
                        <div class="text-base-content/60">Refresh the page</div>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-envelope text-info text-xl mb-2"></i>
                        <div class="font-medium">Contact Support</div>
                        <div class="text-base-content/60">Get assistance</div>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-question-circle text-info text-xl mb-2"></i>
                        <div class="font-medium">Check Status</div>
                        <div class="text-base-content/60">Service status</div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="mt-8 text-xs text-base-content/50">
                If this error persists, please contact our support team with the request ID above.
            </div>
        </div>
    </div>
</div>
